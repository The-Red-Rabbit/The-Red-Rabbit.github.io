---
layout: default
---

<h1>{{ site.theme_config.home.title_blog }}</h1>

<div id="tag-nav">
<span class="tag" id="tag-all"><a href="{{ page.url }}">SHOW ALL ({{ site.posts.size }})</a></span>- 
{% for tag in site.tags %}
<span class="tag" data-tag="{{ tag[0] }}"><a href="?tag={{ tag[0] | url_encode }}">{{ tag[0] }} ({{ tag[1].size }})</a></span>
{% endfor %}
</div>

{% for category in site.categories %}
  {% if category[1].size > 0 %}
    <div class="category-block" data-category="{{ category[0] }}">
      <h3>{{ category[0] }}</h3>
      <ul class="post-list">
        {% for post in category[1] %}
          <li data-tags="{{ post.tags | join: ',' }}" class="post-list-item entry">
            <span class="home-date">
              {{ post.date | date: site.theme_config.date_format }} ¬ª
            </span>
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
{% endfor %}


<script>
  const urlParams = new URLSearchParams(location.search);
  const tagRaw = urlParams.get('tag');
  const tag = tagRaw ? decodeURIComponent(tagRaw.replace(/\+/g, ' ')) : null;

  if (tag) {
    // Filter Beitr√§ge
    document.querySelectorAll('.post-list-item').forEach(post => {
      const tags = post.dataset.tags?.split(',') || [];
      post.classList.toggle('hidden', !tags.includes(tag));
    });

    // Kategoriebl√∂cke ausblenden, wenn kein sichtbarer Beitrag enthalten
    document.querySelectorAll('.category-block').forEach(block => {
      const posts = block.querySelectorAll('.post-list-item');
      const hasVisible = Array.from(posts).some(p => !p.classList.contains('hidden'));
      block.style.display = hasVisible ? '' : 'none';
    });

    // Aktiven Tag hervorheben
    document.querySelectorAll('#tag-nav span[data-tag]').forEach(tagEl => {
      if (tagEl.dataset.tag === tag) tagEl.classList.add('active');
    });

    // Hinweis bei 0 Treffern
    const anyVisible = Array.from(document.querySelectorAll('.post-list-item'))
      .some(post => !post.classList.contains('hidden'));
    if (!anyVisible) {
      const msg = document.createElement('p');
      msg.textContent = üîç Keine Beitr√§ge mit Tag "${tag}" gefunden.;
      msg.style.margin = '1em 0';
      msg.style.fontStyle = 'italic';
      document.getElementById('tag-nav')?.insertAdjacentElement('afterend', msg);
    }

  } else {
    document.getElementById('tag-all')?.classList.add('active');
  }
</script>

<style>
 .entry {
    opacity: 1;
    filter: blur(0px);
    transition: opacity 0.4s ease, filter 0.4s ease;
  }

  .entry.hidden {
    opacity: 0;
    filter: blur(4px);
    pointer-events: none;
    height: 0;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

.active {
background-color: var(--highlight);
a {
color: var(--bg-secondary) !important;
}
}
</style>
